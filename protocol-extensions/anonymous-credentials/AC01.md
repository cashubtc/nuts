# AC-01: Mint Public Key Exchange

`mandatory`

---

Status: Stable draft
Scope: Retrieval of active and specific Mint keysets
Dependencies: AC-00, AC-02, NUT-02

This document outlines how wallets obtain the Mint’s active keysets and optionally retrieve a specific keyset by id.

## 1. Endpoints

- GET `/v1/kvac/keys` — list of active keysets
- GET `/v1/kvac/keys/{keyset_id_hex}` — a specific keyset (active or inactive)

Content-Type: application/json

## 2. Responses

### 2.1 GET /v1/kvac/keys

```json
{
  "keysets": [
    {
      "id": "<keyset_id_hex>",
      "unit": "<currency_unit_str>",
      "final_expiry": "<unix_epoch_int|null>",
      "keys": {
        "Cw": "<compressed_pubkey_hex>",
        "I": "<compressed_pubkey_hex>"
      }
    }
  ]
}
```

Constraints:
- Returned keysets MUST be active (the Mint signs Outputs for them).
- Public keys MUST be compressed Secp256k1 format (33 bytes, hex).
- `id` MUST be recomputable from `keys` (see AC-02/NUT-02).
- `unit` defines the keyset’s unit (e.g., "sat"); clients MUST respect unit consistency across requests (see AC-00/AC-03).
- `final_expiry` MAY be provided; after expiry, notes from the keyset MAY be invalidated by Mint policy (see AC-02).

### 2.2 GET /v1/kvac/keys/{keyset_id_hex}

Returns the keyset regardless of active status:

```json
{
  "keysets": [
    {
      "id": "<keyset_id_hex>",
      "unit": "<currency_unit_str>",
      "final_expiry": "<unix_epoch_int|null>",
      "keys": {
        "Cw": "<compressed_pubkey_hex>",
        "I": "<compressed_pubkey_hex>"
      }
    }
  ]
}
```

## 3. Client Behavior

- SHOULD verify that `id` recomputes from the provided public keys (NUT-02).
- SHOULD fetch active keysets before issuing requests that involve Outputs (AC-03/AC-06).
- SHOULD cache and refresh active keysets periodically to handle rotation.

## 4. Errors

- 400 Bad Request — malformed `keyset_id`
- 404 Not Found — unknown `keyset_id`
- 5xx — server-side failures

## 5. Security and Policy Notes

- Key rotation: wallets SHOULD refresh the active set before constructing Outputs.
- Mint MAY rotate keys without prior notice; clients SHOULD handle changed active sets.

[AC-00]: AC00.md
[AC-02]: AC02.md
[02]: 02.md
