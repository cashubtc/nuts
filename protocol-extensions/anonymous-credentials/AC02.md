# AC-02: Keysets and fees

`mandatory`

---

KVAC keysets largely relies on the main specification in [NUT-02][02]. This document only reports the difference in network endpoints for _getting_ keysets specific to this extension of the protocol.

## Keyset Properties

### Keyset ID

A keyset id is an identifier for a specific keyset. It can be derived by anyone who knows the set of public keys of a mint. Wallets CAN compute the keyset id for a given keyset by themselves to confirm that the mint is supplying the correct keyset ID.

The keyset id is in each `Note` so it can be used by wallets to identify which Mint and keyset it was generated from. The keyset field id is also present in the `Input`s and `Output`s sent and received to/from the Mint (see [AC-00][AC-00]).

### Active keysets

Refer to [NUT-02][02].

### Fees

Refer to [NUT-02][02].

### Deriving the keyset ID

Refer to [NUT-02][02].

## Network Requests

A wallet can ask the mint for a list of all keysets via the `GET /v1/kvac/keysets` endpoint.

Request:

```http
GET https://mint.host:3338/v1/kvac/keysets
```

With curl:

```bash
curl -X GET https://mint.host:3338/v1/kvac/keysets
```

Response `GetKeysetsResponse` of `Bob`:

```json
{
  "keysets": [
    {
      "id": <hex_str>,
      "unit": <str>,
      "active": <bool>,
      "final_expiry": <int|null>,
      "input_fee_ppk": <int|null>,
    },
    ...
  ]
}
```

Here, `id` is the keyset ID, `unit` is the unit string (e.g. "sat") of the keyset, `active` indicates whether new ecash can be minted with this keyset, and `input_fee_ppk` is the fee (per thousand units) to spend one input spent from this keyset. If `input_fee_ppk` is not given, we assume it to be `0`.

[AC-00]: AC00.md
[02]: 02.md
